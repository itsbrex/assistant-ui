---
title: Hooks
description: Reactive hooks for accessing runtime state in React Native.
---

All hooks support an optional **selector** function for fine-grained re-renders. Without a selector, the component re-renders on every state change. With a selector, it only re-renders when the selected value changes (shallow equality).

```tsx
// Re-renders on every thread state change
const thread = useThread();

// Re-renders only when isRunning changes
const isRunning = useThread((s) => s.isRunning);
```

## State Hooks

### useThread

Access thread state.

```tsx
import { useThread } from "@assistant-ui/react-native";

const messages = useThread((s) => s.messages);
const isRunning = useThread((s) => s.isRunning);
```

**ThreadState fields:**

| Field | Type | Description |
|-------|------|-------------|
| `messages` | `ThreadMessage[]` | All messages in the thread |
| `isRunning` | `boolean` | Whether the model is generating |
| `isDisabled` | `boolean` | Whether the thread is disabled |
| `capabilities` | `RuntimeCapabilities` | What actions are supported |

### useComposer

Access composer state.

```tsx
import { useComposer } from "@assistant-ui/react-native";

const text = useComposer((s) => s.text);
const isEmpty = useComposer((s) => s.isEmpty);
```

**ComposerState fields:**

| Field | Type | Description |
|-------|------|-------------|
| `text` | `string` | Current input text |
| `isEmpty` | `boolean` | Whether the input is empty |
| `attachments` | `Attachment[]` | Current attachments |
| `canCancel` | `boolean` | Whether a run can be cancelled |

### useMessage

Access the current message state. Must be used inside a `MessageProvider` or a `renderMessage` / `renderItem` callback.

```tsx
import { useMessage } from "@assistant-ui/react-native";

const role = useMessage((s) => s.role);
const isLast = useMessage((s) => s.isLast);
```

**MessageState fields:**

| Field | Type | Description |
|-------|------|-------------|
| `message` | `ThreadMessage` | The message object |
| `role` | `MessageRole` | `"user"`, `"assistant"`, or `"system"` |
| `isLast` | `boolean` | Whether this is the last message |
| `branchNumber` | `number` | Current branch index |
| `branchCount` | `number` | Total number of branches |

### useContentPart

Access a specific content part by index within a message.

```tsx
import { useContentPart } from "@assistant-ui/react-native";

const part = useContentPart(0); // first content part
```

### useThreadList

Access the thread list state.

```tsx
import { useThreadList } from "@assistant-ui/react-native";

const { threadIds, mainThreadId, threadItems } = useThreadList();

// With selector
const mainThreadId = useThreadList((s) => s.mainThreadId);
```

**ThreadListState fields:**

| Field | Type | Description |
|-------|------|-------------|
| `threadIds` | `string[]` | All thread IDs |
| `mainThreadId` | `string` | Currently active thread ID |
| `threadItems` | `Record<string, ThreadListItemState>` | Thread metadata (title, etc.) |

## Runtime Hooks

### useAssistantRuntime

Get the `AssistantRuntime` from context. This is the top-level runtime with access to thread management.

```tsx
import { useAssistantRuntime } from "@assistant-ui/react-native";

const runtime = useAssistantRuntime();

// Switch threads
runtime.threads.switchToThread(threadId);
runtime.threads.switchToNewThread();

// Thread management
runtime.threads.rename(threadId, "New Title");
runtime.threads.delete(threadId);

// Access the current thread runtime
runtime.thread; // ThreadRuntime
```

### useThreadRuntime

Get the `ThreadRuntime` for the current thread.

```tsx
import { useThreadRuntime } from "@assistant-ui/react-native";

const threadRuntime = useThreadRuntime();

threadRuntime.cancelRun();
threadRuntime.appendMessage(message);
```

### useComposerRuntime

Get the `ComposerRuntime` for the current composer.

```tsx
import { useComposerRuntime } from "@assistant-ui/react-native";

const composerRuntime = useComposerRuntime();

composerRuntime.setText("Hello");
composerRuntime.send();
```

### useMessageRuntime

Get the `MessageRuntime` for the current message.

```tsx
import { useMessageRuntime } from "@assistant-ui/react-native";

const messageRuntime = useMessageRuntime();

messageRuntime.reload();
messageRuntime.switchToBranch({ position: "next" });
```

### useLocalRuntime

Create an `AssistantRuntime` with a `ChatModelAdapter`. Optionally pass `storage` for persistence.

```tsx
import { useLocalRuntime } from "@assistant-ui/react-native";
import AsyncStorage from "@react-native-async-storage/async-storage";

const runtime = useLocalRuntime(chatModel, {
  storage: AsyncStorage,
  titleGenerator: createSimpleTitleAdapter(),
});
```

| Option | Type | Description |
|--------|------|-------------|
| `initialMessages` | `ThreadMessageLike[]` | Messages to pre-populate |
| `storage` | `AsyncStorageLike` | Thread and message persistence |
| `storagePrefix` | `string` | Key prefix for storage (default `"@assistant-ui:"`) |
| `titleGenerator` | `TitleGenerationAdapter` | Auto-generate thread titles |

## Primitive Hooks

Low-level hooks for building custom components.

### useThreadMessages

```tsx
import { useThreadMessages } from "@assistant-ui/react-native";

const messages = useThreadMessages(); // ThreadMessage[]
```

### useThreadIsRunning

```tsx
import { useThreadIsRunning } from "@assistant-ui/react-native";

const isRunning = useThreadIsRunning(); // boolean
```

### useThreadIsEmpty

```tsx
import { useThreadIsEmpty } from "@assistant-ui/react-native";

const isEmpty = useThreadIsEmpty(); // boolean
```

### useComposerSend

```tsx
import { useComposerSend } from "@assistant-ui/react-native";

const { send, canSend } = useComposerSend();
```

### useComposerCancel

```tsx
import { useComposerCancel } from "@assistant-ui/react-native";

const { cancel, canCancel } = useComposerCancel();
```

### useMessageReload

```tsx
import { useMessageReload } from "@assistant-ui/react-native";

const { reload, canReload } = useMessageReload();
```

### useMessageBranching

```tsx
import { useMessageBranching } from "@assistant-ui/react-native";

const { branchNumber, branchCount, goToPrev, goToNext } =
  useMessageBranching();
```

## Model Context Hooks

### useAssistantTool

Register a tool with an optional UI renderer. The tool definition is forwarded to the model, and when the model calls it, the `execute` function runs and the `render` component displays the result.

```tsx
import { useAssistantTool } from "@assistant-ui/react-native";

useAssistantTool({
  toolName: "get_weather",
  description: "Get the current weather for a city",
  parameters: {
    type: "object",
    properties: {
      city: { type: "string" },
    },
    required: ["city"],
  },
  execute: async ({ city }) => {
    const res = await fetch(`https://api.weather.example/${city}`);
    return res.json();
  },
  render: ({ args, result }) => (
    <View>
      <Text>{args.city}: {result?.temperature}°F</Text>
    </View>
  ),
});
```

### useAssistantToolUI

Register only a UI renderer for a tool (without tool definition or execute function).

```tsx
import { useAssistantToolUI } from "@assistant-ui/react-native";

useAssistantToolUI({
  toolName: "get_weather",
  render: ({ args, result, status }) => (
    <View>
      {status?.type === "running"
        ? <Text>Loading weather for {args.city}...</Text>
        : <Text>{args.city}: {result?.temperature}°F</Text>}
    </View>
  ),
});
```

### useAssistantInstructions

Register system instructions in the model context.

```tsx
import { useAssistantInstructions } from "@assistant-ui/react-native";

useAssistantInstructions("You are a helpful weather assistant.");
```

### makeAssistantTool

Create a component that registers a tool when mounted. Useful for declarative tool registration.

```tsx
import { makeAssistantTool } from "@assistant-ui/react-native";

const WeatherTool = makeAssistantTool({
  toolName: "get_weather",
  description: "Get weather",
  parameters: { type: "object", properties: { city: { type: "string" } }, required: ["city"] },
  execute: async ({ city }) => ({ temperature: 72 }),
  render: ({ args, result }) => <Text>{args.city}: {result?.temperature}°F</Text>,
});

// Mount inside AssistantProvider to register
<WeatherTool />
```
